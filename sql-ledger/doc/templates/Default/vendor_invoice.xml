<?xml version="1.0" encoding="utf-8"?>
<sql-ledger-root>
  <letterhead>
    <title>VENDOR INVOICE</title>

    <%include letterhead.xml%>
    
  </letterhead>

<!-- 
 all XML formats have the same structure: the info is contained in a CONTENT block of certain TYPE.
 That way we can batch/merge XML files without loosing any data; all they'll share is 
 the LETTERHEAD block above and FOOTER block further below.
-->
  <content type="VENDOR-INVOICE" >
    <crm type="sold-to">
      <%name%>
      <%address1%> 
      <%address2%> 
      <%city%> 
      <%state%> 
      <%zipcode%> 
      <%country%> 
      <%contact%>
      <%vendorphone%> 
      <%vendorfax%> 
      <%email%> 
      <%vendortaxnumber%> 
    </crm>

    <crm type="ship-to">
      <%shiptoname%>
      <%shiptoaddress1%> 
      <%shiptoaddress2%> 
      <%shiptocity%> 
      <%shiptostate%> 
      <%shiptozipcode%> 
      <%shiptocountry%> 
      <%shiptocontact%>
      <%shiptophone%> 
      <%shiptofax%> 
      <%shiptoemail%> 
    </crm>

<!-- <%company%> + <%address%> are common values found in LETTERHEAD chunk, so they do not show up here (while they DO in the HTML template...) -->
    
<!--      
     Invoice # 
     Date 
     Due 
     Order # 
     Employee 
     Shipping Point 
     Ship via 
-->
    <%invnumber%> 
    <%invdate%> 
    <%duedate%> 
    <%ordnumber%> 
    <%employee%> 
    <%shippingpoint%> 
    <%shipvia%> 

<%if taxincluded%>
    <taxincluded value="true" />
<%end taxincluded%>

<!--
     Item 
     Number 
     Description 
     Qt'y 
     Unit Price 
     Disc % 
     Extended 
-->
<%foreach number%>
    <vendor-invoice-line-item>
      <%runningnumber%> 
      <%number%> 
      <%description%> 
      <%deliverydate%> 
      <%qty%> 
      <%unit%> 
      <%sellprice%> 
      <%discountrate%> 
      <%linetotal%> 
              
      <%notes%> 
    </vendor-invoice-line-item>
<%end number%>

<%foreach tax%>
    <tax-registration-item>
      <!-- Registration No. -->
      <%taxnumber%>
      <%taxdescription%>
      <%taxbase%>
    
      <taxrate-percentage>
        <%taxrate%>
      </taxrate-percentage>
          
      <%tax%> 
    </tax-registration-item>
<%end tax%>

    <summary-totals>
<%if not taxincluded%>
      <sans-tax-subtotal>
        <%subtotal%>
      </sans-tax-subtotal>
<%end taxincluded%>

      <total>
        <%invtotal%>
      </total>

      <%paid%> 

      <balance-due>
        <%total%> 
      </balance-due>

      <%text_amount%>
      
      <currency-decimal-value>
        <%decimal%>
      </currency-decimal-value>
    </summary-totals>

    <currency-info>
      <%currency%>
    </currency-info>

    <%notes%> 

<%foreach payment%>
    <payment-item>
      <%paymentdate%>
      <%paymentaccount%>
      <%paymentsource%>
      <%paymentmemo%> 
      <%payment%>
    </payment-item>
<%end payment%>
  </content>

  <footer>    
<%if taxincluded%>
    <tax-included-msg>
      Taxes shown are included in price.
    </tax-included-msg>
<%end taxincluded%>
  </footer>
</sql-ledger-root>
