<?xml version="1.0" encoding="utf-8"?>
<sql-ledger-root>
  <letterhead>
    <title>A/P-TRANSACTION</title>

    <%include letterhead.xml%>
    
  </letterhead>

<!-- 
 all XML formats have the same structure: the info is contained in a CONTENT block of certain TYPE.
 That way we can batch/merge XML files without loosing any data; all they'll share is 
 the LETTERHEAD block above and FOOTER block further below.
-->
  <content type="AP-TRANSACTION" >
    <!-- when CONTENT has only a single CRM record, it is type-attribute-less and the addressee, implicitly -->
    <crm>
      <%name%>
      <%address1%>
      <%address2%>
      <%city%> 
      <%state%> 
      <%zipcode%> 
      <%country%> 
      <%contact%>
      <%vendorphone%>
      <%vendorfax%>
      <%email%>
      <%vendortaxnumber%>
    </crm>

      <!-- Invoice # -->
      <%invnumber%>

      <%invdate%>
      <%duedate%>

      <!-- PO # -->
      <%ponumber%>

      <!-- Order # -->
      <%ordnumber%>
      <%employee%>

<%if taxincluded%>
      <taxincluded value="true" />
<%end taxincluded%>

<%foreach account%>
        <account-item>    
          <%accno%>
          <%account%>
          <%amount%>
          <%description%>
          <%projectnumber%>
        </account-item>    
<%end account%>

<%foreach tax%>
        <tax-info-line>
          <%taxdescription%>
          
          <tax-rate-percentage>
            <%taxrate%>
          <tax-rate-percentage>
          
          <%tax%>
        </tax-info-line>
<%end tax%>

      <summary-totals>
<%if not taxincluded%>
        <sans-tax-subtotal>
          <%subtotal%>
        </sans-tax-subtotal>
<%end taxincluded%>

        <total>
          <%invtotal%>
        </total>

        <%text_amount%>
      
        <currency-decimal-value>
          <%decimal%>
        </currency-decimal-value>
      </summary-totals>

        <currency-info>
          <%currency%>
        </currency-info>

      <%notes%>
    
<%foreach payment%>
        <payment-item>
          <%paymentdate%>
          <%paymentaccount%>
          <%paymentsource%>
          <%paymentmemo%>
          <%payment%>
        </payment-item>
<%end payment%>
    </data>    

    <footer>    
<%if taxincluded%>
      <tax-included-msg>
        Taxes shown are included in price.
      </tax-included-msg>
<%end taxincluded%>
    </footer>    
  </content>
</sql-ledger-root>
