<?xml version="1.0" encoding="utf-8"?>
<sql-ledger-root>
  <letterhead>
    <title>INCOME STATEMENT</title>

    <%include letterhead.xml%>
    
  </letterhead>

<!-- 
 all XML formats have the same structure: the info is contained in a CONTENT block of certain TYPE.
 That way we can batch/merge XML files without loosing any data; all they'll share is 
 the LETTERHEAD block above and FOOTER block further below.
-->
  <content type="INCOME-STATEMENT" >
    <data>
      <%company%>
      <%address%>

<%if method eq 'cash'%>
      <cash-method value="true" />
<%end method eq 'cash'%>
     
      <%period%> 

      <%department%>

      <%projectnumber%>
      
      <%this_period%> 
      <%previous_period%> 

      <income>
<%foreach income_account%>
        <income_account-item>
          <%income_account%> 
          <%income_this_period%> 
          <%income_previous_period%> 
        </income_account-item>
<%end income_account%>

        <%total_income_this_period%>
        <%total_income_previous_period%>
      </income>
      
      <expense> 
<%foreach expense_account%>
        <expense-account-item>
          <%expense_account%> 
          <%expense_this_period%> 
          <%expense_previous_period%> 
        </expense-account-item>
<%end expense_account%>
       
        <%total_expense_this_period%>
        <%total_expense_previous_period%>
      </expense>

      <summary>
        <%total_this_period%>
        <%total_previous_period%>
      </summary>

      <%currency%> 
<%if currency ne 'CAD'%> 
      <%exchangerate%>
<%end currency ne 'CAD'%>
    </data>

    <footer>
      <currency-msg>
        All amounts in <%currency%> 
        <%if currency ne 'CAD'%> converted at <%exchangerate%><%end currency ne 'CAD'%>.
      </currency-msg>
    </footer>
  </content>
<sql-ledger-root>
