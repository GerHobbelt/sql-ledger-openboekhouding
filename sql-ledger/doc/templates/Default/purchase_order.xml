<?xml version="1.0" encoding="utf-8"?>
<sql-ledger-root>
  <letterhead>
    <title>PURCHASE ORDER</title>

    <%include letterhead.xml%>
    
  </letterhead>

<!-- 
 all XML formats have the same structure: the info is contained in a CONTENT block of certain TYPE.
 That way we can batch/merge XML files without loosing any data; all they'll share is 
 the LETTERHEAD block above and FOOTER block further below.
-->
  <content type="PURCHASE-ORDER" >
    <crm type="to">
      <%name%>
      <%address1%> 
      <%address2%> 
      <%city%> 
      <%state%> 
      <%zipcode%> 
      <%country%> 
      <%contact%>
      <%vendorphone%> 
      <%vendorfax%> 
      <%email%> 
      <%vendortaxnumber%> 
    </crm>

    <crm type="ship-to">
      <%shiptoname%>
      <%shiptoaddress1%> 
      <%shiptoaddress2%> 
      <%shiptocity%> 
      <%shiptostate%> 
      <%shiptozipcode%> 
      <%shiptocountry%> 
      <%shiptocontact%>
      <%shiptophone%> 
      <%shiptofax%> 
      <%shiptoemail%> 
    </crm>

<!-- <%company%> + <%address%> are common values found in LETTERHEAD chunk, so they do not show up here (while they DO in the HTML template...) -->
    
<!--      
     Order # 
     Order Date 
     Required by 
     Contact 
     Shipping Point 
     Ship Via 
-->         
    <%ordnumber%> 
    <%orddate%> 
    <%reqdate%> 
    <%employee%> 
    <%shippingpoint%> 
    <%shipvia%> 

<!--      
     Item 
     Number 
     Description 
     Qt'y 
     Price 
     % 
     Amount 
-->
<%foreach number%>
    <purchase-order-item>
      <%runningnumber%>
      <%number%> 
      <%description%> 
      <%qty%> 
      <%unit%> 
      <%sellprice%> 
      <%discountrate%> 
      <%linetotal%> 
              
      <%notes%> 
    </purchase-order-item>
<%end number%>

<%foreach tax%>
    <tax-registration-item>
      <!-- Registration No. -->
      <%taxnumber%>
      <%taxdescription%>
      <%taxbase%>
    
      <taxrate-percentage>
        <%taxrate%>
      </taxrate-percentage>
          
      <%tax%> 
    </tax-registration-item>
<%end tax%>

    <summary-totals>
<%if not taxincluded%>
      <sans-tax-subtotal>
        <%subtotal%>
      </sans-tax-subtotal>
<%end taxincluded%>

      <%ordtotal%> 
    </summary-totals>

    <currency-info>
      <%currency%>
    </currency-info>

    <%terms%>

    <%notes%> 
  </content>

  <footer>    
<%if taxincluded%>
    <tax-included-msg>
      Taxes shown are included in price.
    </tax-included-msg>
<%end taxincluded%>

<%if ordtotal%>
    <currency-msg>
      All amounts in <%currency%>.
    </currency-msg>
<%end ordtotal%>
  </footer>
</sql-ledger-root>
